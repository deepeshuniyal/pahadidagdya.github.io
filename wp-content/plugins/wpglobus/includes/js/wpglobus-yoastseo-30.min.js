var WPGlobusYoastSeo;jQuery(document).ready(function(e){"use strict";if("undefined"!=typeof wpseoReplaceVarsL10n&&"undefined"!=typeof WPGlobusCoreData){var t;if("edit-tags.php"==WPGlobusVendor.pagenow){t=WPGlobusYoastSeo={editorIDs:["description"],editor:{},submitId:"#submit",preventChangeEditor:!1,observer:null,init:function(){t.attachListeners(),_.delay(t.start,1500)},submit:function(a){"mouseenter"===a.type?e.each(t.editor,function(a,o){!t.editor[a].contentEditor||t.editor[a].contentEditor.isHidden()?e("#"+a).val(t.editor[a].content):tinymce.get(a).setContent(t.editor[a].content)}):"mouseleave"===a.type?t.preventChangeEditor||(e.each(t.editor,function(a,o){!t.editor[a].contentEditor||t.editor[a].contentEditor.isHidden()?e("#"+a).val(WPGlobusCore.TextFilter(o.content,t.getCurrentTab(),"RETURN_EMPTY")):tinymce.get(a).setContent(WPGlobusCore.TextFilter(o.content,t.getCurrentTab(),"RETURN_EMPTY"))}),t.preventChangeEditor=!1):"click"===a.type&&(t.preventChangeEditor=!0,"tinymce"!=getUserSetting("editor")&&setUserSetting("editor","tinymce"))},attachListeners:function(){e(".wrap").on("tabsactivate",function(a,o){e.each(t.editor,function(a,s){!t.editor[a].contentEditor||t.editor[a].contentEditor.isHidden()?e("#"+a).val(WPGlobusCore.TextFilter(s.content,o.newTab[0].dataset.language,"RETURN_EMPTY")):tinymce.get(a).setContent(WPGlobusCore.TextFilter(s.content,o.newTab[0].dataset.language,"RETURN_EMPTY"))})}),e(document).on("mouseenter",t.submitId,t.submit).on("mouseleave",t.submitId,t.submit).on("click",t.submitId,t.submit),e(document).on("tinymce-editor-init",function(a,o){if(-1!=_.indexOf(t.editorIDs,o.id)){var s=e("#"+o.id);t.editor[o.id]={},t.editor[o.id].contentEditor=o,t.editor[o.id].content=s.val(),o.setContent(WPGlobusCore.TextFilter(t.editor[o.id].content,WPGlobusCoreData.default_language,"RETURN_EMPTY")),e("#"+o.getContainer().id).find("iframe").addClass("wpglobus-translatable"),s.removeClass("hidden"),o.on("nodechange keyup",_.debounce(t.update,500)),s.on("input keyup",_.debounce(t.update,500))}})},update:function(a){var o,s;void 0!==a.target&&("tinymce"==(o=a.target.id)&&(o=a.target.dataset.id),void 0!==t.editor[o].contentEditor&&(s=!t.editor[o].contentEditor||t.editor[o].contentEditor.isHidden()?e("#"+o).val():t.editor[o].contentEditor.getContent({format:"raw"}),t.editor[o].content=WPGlobusCore.getString(t.editor[o].content,s,t.getCurrentTab())))},getCurrentTab:function(){return e(".wpglobus-taxonomy-tabs-list .ui-tabs-active").data("language")},start:function(){e(".wpglobus-element_description").css({display:"none"})}},WPGlobusYoastSeo.init();var a=function(){e(".wrap").on("tabsactivate",function(t,a){a.newTab[0].dataset.language==WPGlobusCoreData.default_language?e("#poststuff .inside").css({display:"block"}):e("#poststuff .inside").css({display:"none"})}),e.each(["category_description","sitedesc","sitename","tag_description","term_description","term_title"],function(e,t){wpseoReplaceVarsL10n.replace_vars[t]=WPGlobusCore.TextFilter(wpseoReplaceVarsL10n.replace_vars[t],WPGlobusCoreData.default_language)}),WPGlobusYoastSeo.observer=new MutationObserver(function(t){t.forEach(function(t){if("placeholder"==t.attributeName){WPGlobusYoastSeo.observer.disconnect();var a=e("#wpseo_focuskw");""==a.val()&&a.attr("placeholder",WPGlobusCore.TextFilter(a.attr("placeholder"),WPGlobusCoreData.default_language)),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})}})}),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})};window.WPGlobusYoastSeoPlugin=new a}else{t=WPGlobusYoastSeo={wpseoTabSelector:"#wpglobus-wpseo-tabs",url:"",attrs:e("#wpglobus-wpseo-attr"),iB:e("#wpseo-meta-section-content"),t:e("#wpseo-meta-section-content"),ids:"",names:"",init:function(){t.start()},initAddKeywordPopup:function(){1===e("#wpseo-add-keyword-popup").length&&e(".wpseo-add-keyword").on("click",t.addKeywordPopup)},addKeywordPopup:function(){var t=e("#wpseo-add-keyword-popup").find("h3").html();tb_show(t,"#TB_inline?width=650&height=350&inlineId=wpseo-add-keyword-popup","group"),jQuery("#TB_window").css("height",235),jQuery("#TB_window").css("width",680)},qtip:function(){e(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})},start:function(){e(t.wpseoTabSelector).tabs(),t.ids=t.attrs.data("ids"),t.names=t.attrs.data("names"),t.ids=t.ids+","+t.attrs.data("qtip"),t.ids=t.ids.split(","),t.names=t.names.split(","),e("#wpglobus-wpseo-tabs").insertBefore(t.iB),e(".wpseo-metabox-tabs").css({height:"26px"}),e(".wpglobus-wpseo-general").each(function(a,o){var s=e(o),i=s.data("language"),n="wpseo-meta-section-content_"+i;s.html('<div id="'+n+'" class="wpseo-meta-section wpglobus-wpseo-meta-section" style="width:100%" data-language="'+i+'">'+t.t.html()+"</div>"),e("#"+n+" .wpseo-metabox-tabs").attr("id","wpseo-metabox-tabs_"+i),e("#"+n+" .wpseotab").attr("id","wpseo_content_"+i),e("#"+n).css({display:"block"}),e("#wpseo_meta").css({overflow:"hidden"}),e("#"+n+" .snippet_container").addClass("wpglobus-snippet_container"),i!==WPGlobusCoreData.default_language&&e("#"+n+" .wpseo-add-keyword").addClass("hidden"),e.each(t.names,function(t,a){e("#"+a).attr("name",a+"_"+i)}),e.each(t.ids,function(t,a){var o=e("#"+a);"wpseosnippet"==a&&o.addClass("wpglobus-wpseosnippet"),"snippet_title"==a&&o.addClass("wpglobus-snippet_title"),"snippet_meta"==a&&o.addClass("wpglobus-snippet_meta"),"snippet_cite"==a&&o.addClass("wpglobus-snippet_cite"),"snippet_citeBase"==a&&o.addClass("wpglobus-snippet_citeBase"),"yoast_wpseo_focuskw_text_input"==a&&o.addClass("wpglobus-yoast_wpseo_focuskw_text_input"),"wpseo-pageanalysis"==a&&o.addClass("wpglobus-wpseo-pageanalysis"),"snippet_preview"==a&&o.addClass("wpglobus-snippet_preview"),o.attr("id",a+"_"+i),e("#"+a+"_"+i).attr("data-language",i)});var r=WPGlobusCore.TextFilter(e("#yoast_wpseo_focuskw_text_input").val(),i,"RETURN_EMPTY");e("#yoast_wpseo_focuskw_text_input_"+i).val(r),e("#yoast_wpseo_focuskw_"+i).val(r),i!==WPGlobusCoreData.default_language&&(e("#"+n+" #yoast_wpseo_focuskw_text_input_"+i).addClass("hidden").after('<div class="wpglobus-suggest" style="font-weight:bold;">'+WPGlobusVendor.i18n.yoastseo_plus_access+"</div>"),e("#"+n+" #wpseo-pageanalysis_"+i).addClass("hidden"))}),t.iB.addClass("hidden"),t.iB.css({height:0,overflow:"hidden"});var a=WPGlobusCore.TextFilter(e("#yoast_wpseo_focuskw_text_input").val(),WPGlobusCoreData.default_language,"RETURN_EMPTY");e("#yoast_wpseo_focuskw_text_input").val(a),e("#yoast_wpseo_focuskw").val(a),e(".wpseo-metabox-sidebar .wpseo-meta-section-link").on("click",function(t){"#wpseo-meta-section-content"==e(this).attr("href")?e("#wpglobus-wpseo-tabs").css({display:"block"}):e("#wpglobus-wpseo-tabs").css({display:"none"})}),e("body").on("click",".wpglobus-post-body-tabs-list li",function(t){var a=e(this);if(a.hasClass("wpglobus-post-tab")){e("#wpglobus-wpseo-tabs").tabs("option","active",a.data("order"));var o=e("#yoast_wpseo_focuskw_text_input_"+e(this).data("language")).val();YoastSEO.app.rawData.keyword=o,e("#yoast_wpseo_focuskw_text_input").val(o),e('input[name="yoast_wpseo_focuskw"]').val(o),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),t.qtip(),t.initAddKeywordPopup()}};var o;(a=function(){this.replaceVars=wpseoReplaceVarsL10n.replace_vars,this.language=WPGlobusCoreData.default_language,this.tab=WPGlobusCoreData.default_language,this.wpseoTab=WPGlobusCoreData.default_language,this.title_template=wpseoPostScraperL10n.title_template,this.focuskw=e("#yoast_wpseo_focuskw_text_input"),this.focuskw_hidden=e('input[name="yoast_wpseo_focuskw"]'),this.focuskwKeep=!1,this.post_slug="#editable-post-name-full",YoastSEO.app.registerPlugin("wpglobusYoastSeoPlugin",{status:"ready"}),YoastSEO.app.registerModification("content",this.contentModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("title",this.titleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_title",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_meta",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_page_title",this.pageTitleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_meta_desc",this.metaDescModification,"wpglobusYoastSeoPlugin",0),e(document).on("blur",".wpglobus-snippet_title",function(t){var a=e(this),o=WPGlobusCore.getString(e("#yoast_wpseo_title").val(),a.text(),a.data("language"));YoastSEO.app.rawData.pageTitle=o,e('input[name="yoast_wpseo_title"]').val(o),e("#snippet_title").text(o)}),e(document).on("blur",".wpglobus-snippet_meta",function(t){var a=e(this),o=WPGlobusCore.getString(e("#yoast_wpseo_metadesc").val(),a.text(),a.data("language"));e("#yoast_wpseo_metadesc").val(o),e("#snippet_meta").text(o)}),e(document).on("keyup",".wpglobus-yoast_wpseo_focuskw_text_input",function(t){var a=e(this),s=a.val();o.focuskw.val(s),o.focuskw_hidden.val(s),o.updateWpseoKeyword(s,a.data("language")),YoastSEO.app.analyzeTimer(YoastSEO.app)}),e("#publish,#save-post").on("mouseenter",function(t){var a,s="";e(".wpglobus-yoast_wpseo_focuskw_text_input").each(function(t,o){a=e(this),s=WPGlobusCore.getString(s,a.val(),a.data("language"))}),o.focuskw.val(s),o.focuskw_hidden.val(s)}).on("mouseleave",function(t){if(!o.focuskwKeep){o.wpseoTab=e(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language");e(this);o.focuskw.val(e("#yoast_wpseo_focuskw_text_input_"+o.wpseoTab).val()),o.focuskw_hidden.val(e("#yoast_wpseo_focuskw_text_input_"+o.wpseoTab).val())}}).on("click",function(e){o.focuskwKeep=!0}),e(WPGlobusYoastSeo.wpseoTabSelector).on("tabsactivate",function(t,a){if(a.newPanel.attr("data-language")===WPGlobusCoreData.default_language){WPGlobusYoastSeo.url=e(o.post_slug).text();var s=e("#yoast_wpseo_focuskw_text_input_"+WPGlobusCoreData.default_language).val();YoastSEO.app.rawData.keyword=s,o.focuskw.val(s),o.focuskw_hidden.val(s),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),o=this}).prototype.getWPseoTab=function(){return e(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language")},a.prototype.citeModification=function(t){var a="#snippet_citeBase_"+t,o="#snippet_cite_"+t,s=e("#wpseo-tab-"+t).data("yoast-cite-base");!1===e("#wpseo-tab-"+t).data("cite-contenteditable")&&e(o).attr("contenteditable","false"),e(a).text(s)},a.prototype.pageTitleModification=function(t){var a,s="#snippet_title_",i="",n="";return o.title_template==t?e.each(WPGlobusCoreData.enabled_languages,function(a,r){o.language=r,i=o.replaceVariablesPlugin(t),e(s+r).text(i),r==o.getWPseoTab()&&(n=i)}):(a=WPGlobusCore.getTranslations(t),e.each(WPGlobusCoreData.enabled_languages,function(t,r){o.language=r,i=""===a[r]?o.replaceVariablesPlugin(o.title_template):a[r],e(s+r).text(i),r==o.getWPseoTab()&&(n=i)})),n},a.prototype.metaDescModification=function(t){return e.each(WPGlobusCoreData.enabled_languages,function(a,s){e("#snippet_meta_"+s).text(WPGlobusCore.TextFilter(t,s,"RETURN_EMPTY")),o.citeModification(s)}),WPGlobusCore.TextFilter(t,o.getWPseoTab(),"RETURN_EMPTY")},a.prototype.snippetModification=function(e){return WPGlobusCore.TextFilter(e,o.getWPseoTab(),"RETURN_EMPTY")},a.prototype.contentModification=function(t){return o.getWPseoTab()==WPGlobusCoreData.default_language?t:e("#content_"+o.getWPseoTab()).val()},a.prototype.titleModification=function(t){return setTimeout(o.updatePageAnalysis,1e3),o.getWPseoTab()==WPGlobusCoreData.default_language?t:e("#title_"+o.getWPseoTab()).val()},a.prototype.defaultReplace=function(e){return e.replace(/%%sitedesc%%/g,this.replaceVars.sitedesc).replace(/%%sitename%%/g,WPGlobusCore.TextFilter(this.replaceVars.sitename,this.language)).replace(/%%term_title%%/g,this.replaceVars.term_title).replace(/%%term_description%%/g,this.replaceVars.term_description).replace(/%%category_description%%/g,this.replaceVars.category_description).replace(/%%tag_description%%/g,this.replaceVars.tag_description).replace(/%%searchphrase%%/g,this.replaceVars.searchphrase).replace(/%%sep%%/g,this.replaceVars.sep).replace(/%%date%%/g,this.replaceVars.date).replace(/%%id%%/g,this.replaceVars.id).replace(/%%page%%/g,this.replaceVars.page).replace(/%%currenttime%%/g,this.replaceVars.currenttime).replace(/%%currentdate%%/g,this.replaceVars.currentdate).replace(/%%currentday%%/g,this.replaceVars.currentday).replace(/%%currentmonth%%/g,this.replaceVars.currentmonth).replace(/%%currentyear%%/g,this.replaceVars.currentyear).replace(/%%focuskw%%/g,YoastSEO.app.stringHelper.stripAllTags(YoastSEO.app.rawData.keyword))},a.prototype.replaceVariablesPlugin=function(e){return void 0!==e&&(e=this.titleReplace(e),e=this.defaultReplace(e),e=this.doubleSepReplace(e)),e},a.prototype.titleReplace=function(t){var a="";return void 0===(a=this.language==WPGlobusCoreData.default_language?e("#title").val():e("#title_"+this.language).val())&&(a=YoastSEO.app.rawData.pageTitle),t=t.replace(/%%title%%/g,a)},a.prototype.doubleSepReplace=function(e){var t=YoastSEO.app.stringHelper.addEscapeChars(this.replaceVars.sep),a=new RegExp(t+" "+t,"g");return e=e.replace(a,this.replaceVars.sep)},a.prototype.updateWpseoKeyword=function(t,a){a!=WPGlobusCoreData.default_language&&(1==e("#wpseo-meta-section-content_"+a+" .wpseo_keyword").length&&e("#wpseo-meta-section-content_"+a+" .wpseo_keyword").removeClass("wpseo_keyword").addClass("wpglobus-wpseo_keyword_"+a),e(".wpglobus-wpseo_keyword_"+a).text(t))},a.prototype.updatePageAnalysis=function(){e("#wpseo-pageanalysis_"+o.getWPseoTab()).html(e("#wpseo-pageanalysis").html())},window.WPGlobusYoastSeoPlugin=new a,YoastSEO.Analyzer.prototype.urlKeyword=function(){var e=[{test:"urlKeyword",result:0}];return void 0!==WPGlobusYoastSeo&&""!==WPGlobusYoastSeo.url&&(this.config.url=WPGlobusYoastSeo.url),void 0!==this.config.url&&(e[0].result=this.stringHelper.countMatches(this.config.url,this.keywordRegexInverse)),e}}}});