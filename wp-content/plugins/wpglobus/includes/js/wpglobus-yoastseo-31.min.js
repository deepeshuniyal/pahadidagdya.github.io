var WPGlobusYoastSeo;jQuery(document).ready(function(e){"use strict";if("undefined"!=typeof wpseoReplaceVarsL10n&&"undefined"!=typeof WPGlobusCoreData&&"undefined"!=typeof WPGlobusVendor){var t;if("edit-tags.php"==WPGlobusVendor.pagenow||"term.php"==WPGlobusVendor.pagenow){t=WPGlobusYoastSeo={editorIDs:["description"],editor:{},submitId:"#submit",preventChangeEditor:!1,observer:null,init:function(){t.attachListeners(),_.delay(t.start,1500)},submit:function(a){"mouseenter"===a.type?e.each(t.editor,function(a,s){!t.editor[a].contentEditor||t.editor[a].contentEditor.isHidden()?e("#"+a).val(t.editor[a].content):tinymce.get(a).setContent(t.editor[a].content)}):"mouseleave"===a.type?t.preventChangeEditor||(e.each(t.editor,function(a,s){!t.editor[a].contentEditor||t.editor[a].contentEditor.isHidden()?e("#"+a).val(WPGlobusCore.TextFilter(s.content,t.getCurrentTab(),"RETURN_EMPTY")):tinymce.get(a).setContent(WPGlobusCore.TextFilter(s.content,t.getCurrentTab(),"RETURN_EMPTY"))}),t.preventChangeEditor=!1):"click"===a.type&&(t.preventChangeEditor=!0,"tinymce"!=getUserSetting("editor")&&setUserSetting("editor","tinymce"))},attachListeners:function(){e(".wrap").on("tabsactivate",function(a,s){e.each(t.editor,function(a,o){!t.editor[a].contentEditor||t.editor[a].contentEditor.isHidden()?e("#"+a).val(WPGlobusCore.TextFilter(o.content,s.newTab[0].dataset.language,"RETURN_EMPTY")):tinymce.get(a).setContent(WPGlobusCore.TextFilter(o.content,s.newTab[0].dataset.language,"RETURN_EMPTY"))})}),e(document).on("mouseenter",t.submitId,t.submit).on("mouseleave",t.submitId,t.submit).on("click",t.submitId,t.submit),e(document).on("tinymce-editor-init",function(a,s){if(-1!=_.indexOf(t.editorIDs,s.id)){var o=e("#"+s.id);t.editor[s.id]={},t.editor[s.id].contentEditor=s,t.editor[s.id].content=o.val(),s.setContent(WPGlobusCore.TextFilter(t.editor[s.id].content,WPGlobusCoreData.default_language,"RETURN_EMPTY")),e("#"+s.getContainer().id).find("iframe").addClass("wpglobus-translatable"),o.removeClass("hidden"),s.on("nodechange keyup",_.debounce(t.update,500)),o.on("input keyup",_.debounce(t.update,500))}})},update:function(a){var s,o;void 0!==a.target&&("tinymce"==(s=a.target.id)&&(s=a.target.dataset.id),void 0!==t.editor[s].contentEditor&&(o=!t.editor[s].contentEditor||t.editor[s].contentEditor.isHidden()?e("#"+s).val():t.editor[s].contentEditor.getContent({format:"raw"}),t.editor[s].content=WPGlobusCore.getString(t.editor[s].content,o,t.getCurrentTab())))},getCurrentTab:function(){return e(".wpglobus-taxonomy-tabs-list .ui-tabs-active").data("language")},start:function(){e(".wpglobus-element_description").css({display:"none"})}},WPGlobusYoastSeo.init();var a=function(){e(".wrap").on("tabsactivate",function(t,a){a.newTab[0].dataset.language==WPGlobusCoreData.default_language?e("#poststuff .inside").css({display:"block"}):e("#poststuff .inside").css({display:"none"})}),e.each(["category_description","sitedesc","sitename","tag_description","term_description","term_title"],function(e,t){wpseoReplaceVarsL10n.replace_vars[t]=WPGlobusCore.TextFilter(wpseoReplaceVarsL10n.replace_vars[t],WPGlobusCoreData.default_language)}),WPGlobusYoastSeo.observer=new MutationObserver(function(t){t.forEach(function(t){if("placeholder"==t.attributeName){WPGlobusYoastSeo.observer.disconnect();var a=e("#wpseo_focuskw");""==a.val()&&a.attr("placeholder",WPGlobusCore.TextFilter(a.attr("placeholder"),WPGlobusCoreData.default_language)),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})}})}),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})};window.WPGlobusYoastSeoPlugin=new a}else{t=WPGlobusYoastSeo={wpseoTabSelector:"#wpglobus-wpseo-tabs",url:"",attrs:e("#wpglobus-wpseo-attr"),iB:e("#wpseo-meta-section-content"),t:e("#wpseo-meta-section-content"),ids:"",names:"",editSnippetButtonClass:"wpglobus-snippet-editor__edit-button",editSnippetFormClass:"wpglobus-snippet-editor__form",editSnippetSubmitClass:"wpglobus-snippet-editor__submit",editSnippetHeadingClass:"wpglobus-snippet-editor__heading-editor",yoastTitleProgress:"wpglobus-yoast-title-progress",yoastMetadescProgress:"wpglobus-yoast-metadesc-progress",init:function(){t.start()},initAddKeywordPopup:function(){1===e("#wpseo-add-keyword-popup").length&&e(".wpseo-add-keyword").on("click",t.addKeywordPopup)},addKeywordPopup:function(){var t=e("#wpseo-add-keyword-popup").find("h3").html();tb_show(t,"#TB_inline?width=650&height=350&inlineId=wpseo-add-keyword-popup","group"),jQuery("#TB_window").css("height",235),jQuery("#TB_window").css("width",680)},qtip:function(){e(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})},removeClasses:function(e,t){_.each(t,function(t){e.removeClass(t)})},updateProgressBar:function(a,s){if(void 0!==a&&(void 0!==s||("undefined"!==a.data("language")&&(s=a.data("language")),void 0!==s))){var o,i=["snippet-editor__progress--bad","snippet-editor__progress--ok","snippet-editor__progress--good"],n=0,p="",r=0,l=!1;n=a.val().length,a.hasClass("wpglobus-snippet-editor-title")?(r=(o=e("progress."+t.yoastTitleProgress+"_"+s)).attr("max"),p=i[2],0==n?p=i[1]:n>r?(p=i[1],l=!0):n>0&&n<35&&(p=i[1])):a.hasClass("wpglobus-snippet-editor-meta-description")&&(r=(o=e("progress."+t.yoastMetadescProgress+"_"+s)).attr("max"),p=i[2],0==n?p=i[1]:n>r?(p=i[1],l=!0):n>0&&n<121&&(p=i[1])),t.removeClasses(o,i),o.attr("value",n).addClass(p),l?a.css("color","#f00"):a.css("color","#000")}},start:function(){e(t.wpseoTabSelector).tabs(),t.ids=t.attrs.data("ids"),t.names=t.attrs.data("names"),t.ids=t.ids+","+t.attrs.data("qtip"),t.ids=t.ids.split(","),t.names=t.names.split(","),e("#wpglobus-wpseo-tabs").insertBefore(t.iB),e(".wpseo-metabox-tabs").css({height:"26px"}),e(".wpglobus-wpseo-general").each(function(a,s){var o=e(s),i=o.data("language"),n="wpseo-meta-section-content_"+i;o.html('<div id="'+n+'" class="wpseo-meta-section wpglobus-wpseo-meta-section" style="width:100%" data-language="'+i+'">'+t.t.html()+"</div>"),e("#"+n+" .wpseo-metabox-tabs").attr("id","wpseo-metabox-tabs_"+i),e("#"+n+" .wpseotab").attr("id","wpseo_content_"+i),e("#"+n).css({display:"block"}),e("#wpseo_meta").css({overflow:"hidden"}),e("#"+n+" .snippet_container").addClass("wpglobus-snippet_container"),i!==WPGlobusCoreData.default_language&&e("#"+n+" .wpseo-add-keyword").addClass("hidden"),e.each(t.names,function(t,a){e("#"+a).attr("name",a+"_"+i)}),e.each(t.ids,function(a,s){var o=e("#"+s);"wpseosnippet"==s&&o.addClass("wpglobus-wpseosnippet"),"snippet_title"==s&&o.addClass("wpglobus-snippet_title"),"snippet_meta"==s&&o.addClass("wpglobus-snippet_meta"),"snippet_cite"==s&&o.addClass("wpglobus-snippet_cite"),"snippet_citeBase"==s&&o.addClass("wpglobus-snippet_citeBase"),"yoast_wpseo_focuskw_text_input"==s&&o.addClass("wpglobus-yoast_wpseo_focuskw_text_input"),"wpseo-pageanalysis"==s&&o.addClass("wpglobus-wpseo-pageanalysis"),"snippet_preview"==s&&o.addClass("wpglobus-snippet_preview"),"snippet-editor-title"==s&&(o.addClass("wpglobus-snippet-editor-title"),o.parent("label").attr("for",o.parent("label").attr("for")+"_"+i),o.val(e("#wpseo-tab-"+i).data("wpseotitle")),o.parent("label").find("progress").addClass(t.yoastTitleProgress).addClass(t.yoastTitleProgress+"_"+i),_.debounce(t.updateProgressBar(o,i),500)),"snippet-editor-slug"==s&&(o.addClass("wpglobus-snippet-editor-slug"),o.parent("label").attr("for",o.parent("label").attr("for")+"_"+i),WPGlobusCoreData.default_language!=i&&o.attr("disabled","disabled")),"snippet-editor-meta-description"==s&&(o.addClass("wpglobus-snippet-editor-meta-description"),o.parent("label").attr("for",o.parent("label").attr("for")+"_"+i),o.val(e("#wpseo-tab-"+i).data("metadesc")),o.parent("label").find("progress").addClass(t.yoastMetadescProgress).addClass(t.yoastMetadescProgress+"_"+i),_.debounce(t.updateProgressBar(o,i),500)),o.attr("id",s+"_"+i),e("#"+s+"_"+i).attr("data-language",i)});var p=WPGlobusCore.TextFilter(e("#yoast_wpseo_focuskw_text_input").val(),i,"RETURN_EMPTY");e("#yoast_wpseo_focuskw_text_input_"+i).val(p),e("#yoast_wpseo_focuskw_"+i).val(p),i!==WPGlobusCoreData.default_language&&(e("#"+n+" #yoast_wpseo_focuskw_text_input_"+i).addClass("hidden").after('<div class="wpglobus-suggest" style="font-weight:bold;">'+WPGlobusVendor.i18n.yoastseo_plus_access+"</div>"),e("#"+n+" #wpseo-pageanalysis_"+i).addClass("hidden"))}),e(".wpglobus-wpseosnippet").each(function(a,s){var o=e(s),i=o.data("language");o.find("button.snippet-editor__button.snippet-editor__edit-button").addClass(t.editSnippetButtonClass).addClass(t.editSnippetButtonClass+"_"+i).attr("data-language",i),o.find(".snippet-editor__form").addClass(t.editSnippetFormClass).addClass(t.editSnippetFormClass+"_"+i),o.find(".snippet-editor__heading-editor").addClass(t.editSnippetHeadingClass).addClass(t.editSnippetHeadingClass+"_"+i),o.find(".snippet-editor__submit").addClass(t.editSnippetSubmitClass).addClass(t.editSnippetSubmitClass+"_"+i).attr("data-language",i)}),t.iB.addClass("hidden"),t.iB.css({height:0,overflow:"hidden"});var a=WPGlobusCore.TextFilter(e("#yoast_wpseo_focuskw_text_input").val(),WPGlobusCoreData.default_language,"RETURN_EMPTY");e("#yoast_wpseo_focuskw_text_input").val(a),e("#yoast_wpseo_focuskw").val(a),e(".wpseo-metabox-sidebar .wpseo-meta-section-link").on("click",function(t){"#wpseo-meta-section-content"==e(this).attr("href")?e("#wpglobus-wpseo-tabs").css({display:"block"}):e("#wpglobus-wpseo-tabs").css({display:"none"})}),e("body").on("click","."+t.editSnippetButtonClass,function(a){var s=e(this),o=s.data("language"),i=e("."+t.editSnippetFormClass+"_"+o),n=e("."+t.editSnippetSubmitClass+"_"+o),p=e("."+t.editSnippetHeadingClass+"_"+o);i.hasClass("snippet-editor--hidden")?(i.removeClass("snippet-editor--hidden"),p.removeClass("snippet-editor--hidden"),n.removeClass("snippet-editor--hidden")):(i.addClass("snippet-editor--hidden"),p.addClass("snippet-editor--hidden")),s.addClass("snippet-editor--hidden")}),e("body").on("click","."+t.editSnippetSubmitClass,function(a){var s=e(this).data("language"),o=e("."+t.editSnippetButtonClass+"_"+s),i=e("."+t.editSnippetFormClass+"_"+s),n=e("."+t.editSnippetSubmitClass+"_"+s),p=e("."+t.editSnippetHeadingClass+"_"+s);o.removeClass("snippet-editor--hidden"),i.addClass("snippet-editor--hidden"),n.addClass("snippet-editor--hidden"),p.addClass("snippet-editor--hidden")}),e(document).on("keyup","input.wpglobus-snippet-editor-title",function(a){var s=e(this),o=s.data("language"),i=WPGlobusCore.getString(e('input[name="yoast_wpseo_title"]').val(),s.val(),o);e("#snippet_title_"+o).text(s.val()),YoastSEO.app.rawData.pageTitle=i,e('input[name="yoast_wpseo_title"]').val(i),e("#snippet_title").text(i),_.debounce(t.updateProgressBar(s,o),500)}),e(document).on("keyup","input.wpglobus-snippet-editor-slug",function(t){var a=e(this),s=a.data("language");e("#snippet_cite_"+s).text(a.val()+"/"),e("#editable-post-name").text(a.val()),e("#editable-post-name-full").text(a.val())}),e(document).on("change","input.wpglobus-snippet-editor-slug",function(t){var a=e(this);e.post(ajaxurl,{action:"sample-permalink",post_id:e("#post_ID").val()||0,new_slug:a.val(),new_title:e("#title").val(),samplepermalinknonce:e("#samplepermalinknonce").val()})}),e(document).on("keyup","textarea.wpglobus-snippet-editor-meta-description",function(a){var s=e(this),o=s.data("language");e("#snippet_meta_"+o).text(s.val());var i=WPGlobusCore.getString(e("#yoast_wpseo_metadesc").val(),s.val(),s.data("language"));e("#yoast_wpseo_metadesc").val(i),e("#snippet_meta").text(i),_.debounce(t.updateProgressBar(s,o),500)}),e("body").on("click",".wpglobus-post-body-tabs-list li",function(t){var a=e(this);if(a.hasClass("wpglobus-post-tab")){e("#wpglobus-wpseo-tabs").tabs("option","active",a.data("order"));var s=e("#yoast_wpseo_focuskw_text_input_"+e(this).data("language")).val();YoastSEO.app.rawData.keyword=s,e("#yoast_wpseo_focuskw_text_input").val(s),e('input[name="yoast_wpseo_focuskw"]').val(s),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),t.qtip(),t.initAddKeywordPopup()}};var s;(a=function(){this.replaceVars=wpseoReplaceVarsL10n.replace_vars,this.language=WPGlobusCoreData.default_language,this.tab=WPGlobusCoreData.default_language,this.wpseoTab=WPGlobusCoreData.default_language,this.title_template=wpseoPostScraperL10n.title_template,this.focuskw=e("#yoast_wpseo_focuskw_text_input"),this.focuskw_hidden=e('input[name="yoast_wpseo_focuskw"]'),this.focuskwKeep=!1,this.post_slug="#editable-post-name-full",YoastSEO.app.registerPlugin("wpglobusYoastSeoPlugin",{status:"ready"}),YoastSEO.app.registerModification("content",this.contentModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("title",this.titleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_title",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_meta",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_page_title",this.pageTitleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_meta_desc",this.metaDescModification,"wpglobusYoastSeoPlugin",0),e(document).on("blur",".wpglobus-snippet_title",function(t){var a=e(this),s=WPGlobusCore.getString(e("#yoast_wpseo_title").val(),a.text(),a.data("language"));YoastSEO.app.rawData.pageTitle=s,e('input[name="yoast_wpseo_title"]').val(s),e("#snippet_title").text(s)}),e(document).on("blur",".wpglobus-snippet_meta",function(t){var a=e(this),s=WPGlobusCore.getString(e("#yoast_wpseo_metadesc").val(),a.text(),a.data("language"));e("#yoast_wpseo_metadesc").val(s),e("#snippet_meta").text(s)}),e(document).on("keyup",".wpglobus-yoast_wpseo_focuskw_text_input",function(t){var a=e(this),o=a.val();s.focuskw.val(o),s.focuskw_hidden.val(o),s.updateWpseoKeyword(o,a.data("language")),YoastSEO.app.analyzeTimer(YoastSEO.app)}),e("#publish,#save-post").on("mouseenter",function(t){var a,o="";e(".wpglobus-yoast_wpseo_focuskw_text_input").each(function(t,s){a=e(this),o=WPGlobusCore.getString(o,a.val(),a.data("language"))}),s.focuskw.val(o),s.focuskw_hidden.val(o)}).on("mouseleave",function(t){if(!s.focuskwKeep){s.wpseoTab=e(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language");e(this);s.focuskw.val(e("#yoast_wpseo_focuskw_text_input_"+s.wpseoTab).val()),s.focuskw_hidden.val(e("#yoast_wpseo_focuskw_text_input_"+s.wpseoTab).val())}}).on("click",function(e){s.focuskwKeep=!0}),e(WPGlobusYoastSeo.wpseoTabSelector).on("tabsactivate",function(t,a){if(a.newPanel.attr("data-language")===WPGlobusCoreData.default_language){WPGlobusYoastSeo.url=e(s.post_slug).text();var o=e("#yoast_wpseo_focuskw_text_input_"+WPGlobusCoreData.default_language).val();YoastSEO.app.rawData.keyword=o,s.focuskw.val(o),s.focuskw_hidden.val(o),YoastSEO.app.analyzeTimer(YoastSEO.app)}}),s=this}).prototype.getWPseoTab=function(){return e(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language")},a.prototype.citeModification=function(t){var a="#snippet_citeBase_"+t,s="#snippet_cite_"+t,o=e("#wpseo-tab-"+t).data("yoast-cite-base");!1===e("#wpseo-tab-"+t).data("cite-contenteditable")&&e(s).attr("contenteditable","false"),e(a).text(o)},a.prototype.pageTitleModification=function(t){var a,o="#snippet_title_",i="",n="";if(s.title_template==t)e.each(WPGlobusCoreData.enabled_languages,function(a,p){s.language=p,i=s.replaceVariablesPlugin(t),e(o+p).text(i),p==s.getWPseoTab()&&(n=i)});else{if(a=WPGlobusCore.getTranslations(t),s.getWPseoTab()!==WPGlobusCoreData.default_language&&a[WPGlobusCoreData.default_language]==t){var p=s.getWPseoTab();return e(o+p).text(t),t}e.each(WPGlobusCoreData.enabled_languages,function(t,p){s.language=p,i=""===a[p]?s.replaceVariablesPlugin(s.title_template):a[p],e(o+p).text(i),p==s.getWPseoTab()&&(n=i)})}return n},a.prototype.metaDescModification=function(t){var a="#snippet_meta_";if(s.getWPseoTab()!==WPGlobusCoreData.default_language&&WPGlobusCore.getTranslations(t)[WPGlobusCoreData.default_language]==t){var o=s.getWPseoTab();return e(a+o).text(t),s.citeModification(o),t}return e.each(WPGlobusCoreData.enabled_languages,function(o,i){e(a+i).text(WPGlobusCore.TextFilter(t,i,"RETURN_EMPTY")),s.citeModification(i)}),WPGlobusCore.TextFilter(t,s.getWPseoTab(),"RETURN_EMPTY")},a.prototype.snippetModification=function(e){return WPGlobusCore.TextFilter(e,s.getWPseoTab(),"RETURN_EMPTY")},a.prototype.contentModification=function(t){return s.getWPseoTab()==WPGlobusCoreData.default_language?t:e("#content_"+s.getWPseoTab()).val()},a.prototype.titleModification=function(t){return setTimeout(s.updatePageAnalysis,1e3),s.getWPseoTab()==WPGlobusCoreData.default_language?t:e("#title_"+s.getWPseoTab()).val()},a.prototype.defaultReplace=function(e){var t=YoastSEO.app.rawData.keyword;return e.replace(/%%sitedesc%%/g,this.replaceVars.sitedesc).replace(/%%sitename%%/g,this.replaceVars.sitename).replace(/%%term_title%%/g,this.replaceVars.term_title).replace(/%%term_description%%/g,this.replaceVars.term_description).replace(/%%category_description%%/g,this.replaceVars.category_description).replace(/%%tag_description%%/g,this.replaceVars.tag_description).replace(/%%searchphrase%%/g,this.replaceVars.searchphrase).replace(/%%date%%/g,this.replaceVars.date).replace(/%%id%%/g,this.replaceVars.id).replace(/%%page%%/g,this.replaceVars.page).replace(/%%currenttime%%/g,this.replaceVars.currenttime).replace(/%%currentdate%%/g,this.replaceVars.currentdate).replace(/%%currentday%%/g,this.replaceVars.currentday).replace(/%%currentmonth%%/g,this.replaceVars.currentmonth).replace(/%%currentyear%%/g,this.replaceVars.currentyear).replace(/%%focuskw%%/g,t)},a.prototype.replaceVariablesPlugin=function(e){return void 0!==e&&(e=this.titleReplace(e),e=this.defaultReplace(e),e=this.replaceSeparators(e)),e},a.prototype.replaceSeparators=function(e){return e.replace(/%%sep%%(\s+%%sep%%)*/g,this.replaceVars.sep)},a.prototype.titleReplace=function(t){var a="";return void 0===(a=this.language==WPGlobusCoreData.default_language?e("#title").val():e("#title_"+this.language).val())&&(a=YoastSEO.app.rawData.pageTitle),t=t.replace(/%%title%%/g,a)},a.prototype.doubleSepReplace=function(e){var t=YoastSEO.app.stringHelper.addEscapeChars(this.replaceVars.sep),a=new RegExp(t+" "+t,"g");return e=e.replace(a,this.replaceVars.sep)},a.prototype.updateWpseoKeyword=function(t,a){a!=WPGlobusCoreData.default_language&&(1==e("#wpseo-meta-section-content_"+a+" .wpseo_keyword").length&&e("#wpseo-meta-section-content_"+a+" .wpseo_keyword").removeClass("wpseo_keyword").addClass("wpglobus-wpseo_keyword_"+a),e(".wpglobus-wpseo_keyword_"+a).text(t))},a.prototype.updatePageAnalysis=function(){e("#wpseo-pageanalysis_"+s.getWPseoTab()).html(e("#wpseo-pageanalysis").html())},a.prototype.countMatches=function(e,t){return null!==e.match(t)?e.match.length:0},window.WPGlobusYoastSeoPlugin=new a,YoastSEO.Analyzer.prototype.urlKeyword=function(){var e=[{test:"urlKeyword",result:0}];return void 0!==WPGlobusYoastSeo&&""!==WPGlobusYoastSeo.url&&(this.config.url=WPGlobusYoastSeo.url),void 0!==this.config.url&&(e[0].result=a.prototype.countMatches(this.config.url,this.keywordRegexInverse)),e}}}});